var defaultDomain="vnexpress.net";-1<location.hostname.indexOf("ngoisao.net")?defaultDomain="ngoisao.net":-1<location.hostname.indexOf("ione.net")&&(defaultDomain="ione.net");var myDate,device_env,cookieName="login_system",cookieValue=1;document.cookie.indexOf(cookieName+"="+cookieValue)<0&&((myDate=new Date).setMonth(myDate.getMonth()+12),document.cookie=cookieName+"="+cookieValue+";expires="+myDate+";domain=."+defaultDomain+";path=/"),window.console||(console={log:function(){}}),void 0===device_env&&(device_env=4);var myvne_users={domain:"."+defaultDomain,prefix_cookie:"myvne_",static_url:"https://s1.vnecdn.net/myvne",myvne_url:-1<location.hostname.indexOf("demo.")||-1<location.hostname.indexOf("beta-my.")||-1<location.hostname.indexOf("redesign.")?"https://beta-my."+defaultDomain:"https://my."+defaultDomain,vne_url:"https://"+defaultDomain,profile:{},notifycount:0,notifylimit:10,notifyoffset:0,windowWidth:0,taskbarload:{not_login:0,profile:0},listenloaded:0,timeoutprofile:"",timeoutClose:"",config:{},options:{taskbar:!0,type:"popup"},fullname:null,action:null,return_code:null,message:null,oauth_type:null,time_now:(new Date).getTime(),fancyboxoption:function(){return{padding:0,closeBtn:!1,height:650,minWidth:200,maxWidth:650<this.windowWidth?630:"100%",fitToView:!1,margin:0,autoScale:!1,openSpeed:0,scrolling:"no",iframe:{scrolling:"no",preload:!1}}},runloaded:0,callback:"",callbackAction:{},divposition:"body",cookieNameByHost:function(e){var t;return"string"!=typeof e||""==e||0<(t=location.host.match(/([^.]*)\.net/)).length&&"vnexpress"!=t[1]&&(e+="_"+t[1]),e},setCallback:function(e,t){var o=this.callbackAction;return o[e]?-1==o[e].indexOf(t)&&o[e].push(t):o[e]=[t],this.callbackAction=o,"setcallback ok"},unsetCallback:function(e,t){var o=this.callbackAction;if(o[e]){if("authen"==e)return delete o[e];t=o[e].indexOf(t);-1!=t&&o[e].splice(t,1)}return!1},processCallback:function(o,n){var i=this;"object"==typeof o&&$.each(o,function(e,t){i.processCallback(t,n)});var e=this.callbackAction;return e[o]&&$.each(e[o],function(e,t){"authen"==o&&i.callbackAction[o].splice(e,1),i.runcallback(t,n)}),!1},addScripts:function(e,t,o,n){var i=document.createElement("script");i.type=void 0===n?"text/javascript":n,i.src=e,i.async=t,i.onload=function(){i.setAttribute("loaded","loaded"),"function"==typeof o&&o()},document.getElementsByTagName("head")[0].append(i)},getUrlParameter:function(e){for(var t,o=window.location.search.substring(1).split("&"),n=0;n<o.length;n++)if((t=o[n].split("="))[0]===e)return void 0===t[1]||decodeURIComponent(t[1])},run:function(e){var t;this.action=this.getUrlParameter("action"),this.return_code=this.getUrlParameter("return_code"),this.message=this.getUrlParameter("message"),void 0!==this.action&&"logged"===this.action&&void 0!==this.return_code&&"200"===this.return_code?(this.oauth_type=this.getUrlParameter("oauth_type"),this.getprofile(),t=location.href.includes("?action=logged&return_code=200")?location.href.replace("?action=logged&return_code=200",""):location.href.replace("&action=logged&return_code=200",""),window.history.replaceState(!1,!1,t)):void 0!==this.action&&"logged_internal"===this.action&&void 0!==this.return_code&&"200"===this.return_code?(this.oauth_type=this.getUrlParameter("oauth_type"),this.getprofile(),t=location.href.includes("?action=logged_internal&return_code=200")?location.href.replace("?action=logged_internal&return_code=200",""):location.href.replace("&action=logged_internal&return_code=200",""),window.history.replaceState(!1,!1,t)):(t=this.options,this.options=$.extend(!0,t,e||{}),this._responsive(),this._check_javascript_exist(),1==this.options.taskbar&&(parseInt(this.getCookie("user_id"))?this.getprofile():(this._html_taskbar_not_login(),this.processCallback("not_login",{type:1}),(!localStorage.getItem("myvne_onetap")||Math.floor(Date.now()/1e3)-86400>parseInt(localStorage.getItem("myvne_onetap")))&&(localStorage.removeItem("myvne_onetap"),this.onetap()))),this._listener_basic(),0<$("#myvne_taskbar .timer").length&&(e=this.set_time_topbar(),$("#myvne_taskbar .timer").html(e)))},onetap:function(){var e=this,t=encodeURIComponent(location.href.replace(/#.*?$/,"")),t=e.isValidXSS(t)?t:encodeURIComponent(location.origin+location.pathname);$("#myvne_taskbar").append('<div id="g_id_onload" data-client_id="63695605483-uh3lvelqpb59s1tn5qh59ovbcuhfa54v.apps.googleusercontent.com" data-context="use" data-state_cookie_domain="'+defaultDomain+'" data-prompt_parent_id="g_id_onload" data-url_one_tap="'+t+'" data-login_uri="'+e.myvne_url+'/openid/onetap" style="position: fixed; top: 50px; right: 10px; z-index: 1001;"></div>'),e.addScripts("https://accounts.google.com/gsi/client",!1)},_responsive:function(){this.windowWidth=$(window).width()},getProfileData:function(e){return void 0!==e&&this.profile&&this.runcallback(e,this.profile),this.profile},getprofile:function(){var i=this;if(i.profile.user_fullname&&i.profile.user_id)return i.profile;var e=i.getCookie("user_id")+i.getCookie("just_updated");$.ajax({type:"get",dataType:"jsonp",data:e?{_:btoa(e).split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)}:{},cache:!0,jsonpCallback:"MyvneCallback",url:i.myvne_url+"/authen/users/profile",success:function(e){var t,o,n;0==e.error?(t=e.profile,o="undefined"!=typeof ZONE_ADS?parseInt(ZONE_ADS):0,void 0!==t.user_avatar&&1==o&&(t.user_avatar=t.user_avatar.replace("a.vnecdn.net","vcdn-a.vnecdn.net"),t.user_avatar_original=t.user_avatar_original.replace("a.vnecdn.net","vcdn-a.vnecdn.net")),i.notifycount=e.count_notify,i.profile=t,i.profilecallback(),null!=i.getCookie("social_id")&&(n=i.getCookie("social_id").split("%2C")),i.deleteCookie("social_id"),null!=i.oauth_type&&(window._logAdp||[]).push({action:i.oauth_type,regis_on:window.location.origin,my_vne:t.user_id,vne_avatar:t.user_avatar,vne_email:t.user_email,vne_phone:t.mobile||"",vne_name:t.user_fullname||"",vne_gender:t.sex||0,vne_age:t.age,vne_birthday:t.date_of_birth,vne_city:t.city,vne_dist:t.district,vne_address:t.address,login_type:t.user_login_type,facebook_id:n[0]||"",google_id:n[1]||""})):"not_login"==e.rev&&i._reset_user(),i.processCallback("profile",i.profile)},error:function(e,t){console.log(i._get_message("system_error"))}});e="undefined"!=typeof sessionStorage?parseInt(sessionStorage.getItem("myvne_check_user_online")):NaN;(isNaN(e)||Math.floor(Date.now()/1e3)-900>=e)&&$.ajax({type:"post",dataType:"jsonp",url:i.myvne_url+"/authen/users/updateusersession",success:function(e){0==e.error&&"undefined"!=typeof sessionStorage&&sessionStorage.setItem("myvne_check_user_online",Math.floor(Date.now()/1e3))},error:function(e,t){console.log(e,t)}})},profilecallback:function(){this._set_user(),$("#myvne_action_log").hide()},logout:function(){var o=this;return $.ajax({type:"post",dataType:"jsonp",url:o.myvne_url+"/authen/users/logout",data:{userid:o.user_id},success:function(e){var t;0==e.error?(localStorage.setItem("myvne_onetap",Math.floor(Date.now()/1e3)),o._reset_user(),o.deleteCookie("user_id"),sessionStorage.removeItem("myvne_check_user_online"),o.processCallback("logout",e),(t=window._logAdp||[]).push({action:"logout",regis_on:location.origin}),console.log(t),0<$(".message_box").length&&($(".message_box").remove(),localStorage.setItem(myvne_users.cookieNameByHost("myvne_tmp_notify"),1)),"undefined"!=typeof myvne_plugins&&void 0!==myvne_plugins.initButton&&myvne_plugins.initButton(),"undefined"!=typeof dataLayer&&dataLayer.push({event:"userEvent",user_action:"User Logout",user_signup_method:"Email"}),t=[],-1<o.myvne_url.indexOf("vnexpress.net")?t=["my.ione.net","my.ngoisao.net"]:-1<o.myvne_url.indexOf("ngoisao.net")?t=["my.vnexpress.net","my.ione.net"]:-1<o.myvne_url.indexOf("ione.net")&&(t=["my.vnexpress.net","my.ngoisao.net"]),(-1<location.hostname.indexOf("demo.")||-1<location.hostname.indexOf("beta-my.")||-1<location.hostname.indexOf("redesign."))&&(t[0]=t[0].replace("my.","beta-my."),t[1]=t[1].replace("my.","beta-my.")),location.href="https://"+t[0]+"/authen/users/logout?dist=https://"+t[1]+"&count=1&return="+(o.isValidXSS(location.href)?location.href:location.origin+location.pathname)):alert(e.message)},error:function(e,t){alert(o._get_message("system_error"))}}),!1},_check_javascript_exist:function(){var e,t;void 0===e&&(e="https://s1.vnecdn.net/myvne/j/v26"),window.jQuery||((t=document.createElement("script")).type="text/javascript",t.src=e+"/lib/jquery-1.7.1.min.js",document.getElementsByTagName("head")[0].appendChild(t)),window.NiceScroll||1!=this.options.taskbar||((t=document.createElement("script")).type="text/javascript",t.src=e+"/lib/jquery.nicescroll.js",document.getElementsByTagName("body")[0].appendChild(t)),"function"!=typeof $.fancybox&&((t=document.createElement("script")).type="text/javascript",t.src=e+"/lib/jquery.fancybox.pack.js",document.getElementsByTagName("head")[0].appendChild(t))},_html_popup_invite:function(t,o,n){var i=this;i.fullname=n,$.ajax({type:"get",dataType:"json",data:{email:o},url:i.myvne_url+"/authen/users/checkemail",success:function(e){0==e.error?url="/authen/users/inviteregister?type="+t+"&email="+o+"&fullname="+n:1==e.error&&(url="/authen/users/login?type="+t+"&email="+o+"&fullname="+n),$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log popup-notice"><div class="mfp-close"></div><iframe class="mfp-iframe iframe_guest" frameborder="0" allowfullscreen></iframe></div></div>'},items:{src:i.myvne_url+url},mainClass:"mfp-with-zoom mfp-myvne",alignTop:!1,overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px","max-width":"768px"}),$(this.container).find(".mfp-myvne .mfp-iframe-scaler iframe").css({"min-height":"500px"})}}})},error:function(e,t){console.log(i._get_message("system_error"))}})},_html_taskbar_not_login:function(){var e=this;if(!$("#myvne_taskbar").length)return!1;var t=1!=device_env?'<iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href=https://www.facebook.com/congdongvnexpress&amp;width&amp;layout=button&amp;action=like&amp;show_faces=false&amp;share=false&amp;height=21&amp;appId=283547481836738" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:21px; width:50px;" allowTransparency="true"></iframe>':"",o=1!=device_env?'<iframe src="//platform.twitter.com/widgets/follow_button.html?screen_name=VnEnews" style="width: 60px; height: 20px;" allowtransparency="true" frameborder="0" scrolling="no"></iframe>':"",n=e.config.contact_link?'            <a href="'+e.config.contact_link+'" class="guithutoansoan">                <i class="ico ico_mail"></i>                Gửi tòa soạn            </a>            <div class="clear"></div>':"",i=window.location.hostname;"seo.ione.net"!=i&&"ione.net"!=i||(t=1!=device_env?'<iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href=https://www.facebook.com/ione.net&amp;width&amp;layout=button&amp;action=like&amp;show_faces=false&amp;share=false&amp;height=21&amp;appId=283547481836738" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:21px; width:50px;" allowTransparency="true"></iframe>':"",o='<a href="javascript:;" id="insta_url"><img src="https://s.vnecdn.net/vnexpress/restruct/i/v94/icons/insta.png" /></a>');n='                <div class="myvne_container" '+(e.config.max_width_taskbar?'style="max-width: '+e.config.max_width_taskbar+';"':"")+'>                  <ul class="myvne_contact">                    <li style="white-space: nowrap;"><span class="timer">'+this.set_time_topbar()+'</span></li>                    <li><a href="'+e.vne_url+'/tin-tuc-24h" title="">24h qua</a></li>                    <li><a href="'+e.vne_url+'/rss" id="">RSS</a></li>                    <li>                    <div class="item_social" style="margin-top:6px;" id="myvne_fb_like">'+t+'</div><div class="item_social" style="margin-top:6px;" id="myvne_fb_twitter"> '+o+"</div>                    "+n+'                    </li>                  </ul>                  <ul class="myvne_form_log">                    <li class="block_search_web">                      <div class="left">                        <div id="search">                            <input type="text" class="txt_input" id="inp_keyword" name="q" placeholder="Tìm kiếm">                            <button type="submit" class="icon_seach_web"><i class="ic ic-search"></i></button>                        </div>                      </div>                    </li>                    <li class="myvne_user">                      <a href="javascript:void(0);" class="myvne_link myvne_login_button">Đăng nhập</a>                      <a href="javascript:void(0);" class="myvne_icon myvne_login_button"><i class="ico ico_user_myvne"></i></a>                    </li>                    <li class="myvne_notification">                      <a class="myvne_link myvne_register_button myvne_link_create" href="javascript:void(0);" id="myvne_register_button">Tạo tài khoản</a>                    </li>                  </ul>                  <div class="clear"></div>                </div>            ';$("#myvne_taskbar").html(n),$("#insta_url").click(function(){var e=Number(screen.width/2-350),t=Number(screen.height/2-250);window.open("https://www.instagram.com/ionenews.official","","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=700, height=500, top="+t+", left="+e)}),0==e.taskbarload.not_login&&($("#myvne_taskbar").on("click",".myvne_login_button",function(){e._html_popup_login()}),$("#myvne_taskbar").on("click","#myvne_register_button",function(){null==myvne_users.getCookie("user_id")?e._html_popup_register():e._html_popup_login()}),$(".close-lb").on("click",function(){$.fancybox.close(!0)}),e.taskbarload.not_login=1)},_get_notify:function(){var o=this;$.ajax({type:"get",dataType:"jsonp",cache:!0,jsonpCallback:"MyvneCallback",data:{offset:o.notifyoffset,limit:o.notifylimit},url:o.myvne_url+"/authen/users/notify",success:function(e){0==e.error?(o.notifyoffset=o.notifyoffset+o.notifylimit,$("#myvne_notify_lists").append(e.html),$("#myvne_notify_count").remove(),$("#myvne_notify_lists").find(".myvne_loading").remove(),1==e.viewmore?($("#myvne_notify_viewmore_area").show(),$("#myvne_loading_viewmore").hide(),$("#myvne_notify_viewmore").show()):$("#myvne_notify_viewmore_area").remove()):(o._html_popup_success(e.message),o._reset_user()),$("#myvne_notify_box").niceScroll({autohidemode:!1}).show(),0<$("#myvne_notify_lists").find(".myvne_nofify_item").find("a").length&&$("#myvne_notify_lists").find(".myvne_nofify_item").find("a").on("click",function(e){e.preventDefault();var e=$(this).attr("data-id"),t=$(this).attr("href");e&&$.ajax({type:"get",dataType:"jsonp",data:{notify_id:e},url:o.myvne_url+"/authen/users/changenotifystatus",success:function(e){o._redirect(t)},error:function(){console.log(o._get_message("system_error"))}})})},error:function(e,t){console.log(o._get_message("system_error"))}})},_html_taskbar_profile:function(){var t=this;if(!$("#myvne_taskbar").length||"object"!=typeof t.profile||null==t.profile.user_avatar||void 0===t.profile.user_avatar)return!1;var e=1!=device_env?'<iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href=https://www.facebook.com/congdongvnexpress&amp;width&amp;layout=button&amp;action=like&amp;show_faces=false&amp;share=false&amp;height=21&amp;appId=283547481836738" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:21px; width:50px;" allowTransparency="true"></iframe>':"",o=1!=device_env?'<iframe src="//platform.twitter.com/widgets/follow_button.html?screen_name=VnEnews" style="width: 60px; height: 20px;" allowtransparency="true" frameborder="0" scrolling="no"></iframe>':"",n=window.location.hostname;"seo.ione.net"!=n&&"ione.net"!=n||(e=1!=device_env?'<iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href=https://www.facebook.com/ione.net&amp;width&amp;layout=button&amp;action=like&amp;show_faces=false&amp;share=false&amp;height=21&amp;appId=283547481836738" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:21px; width:50px;" allowTransparency="true"></iframe>':"",o='<a href="javascript:;" id="insta_url"><img src="https://s.vnecdn.net/vnexpress/restruct/i/v94/icons/insta.png" /></a>');var i=10<t.profile.user_avatar.indexOf("/src/")?this.replaceAvatar(t.profile.user_avatar,"/c60x60/"):t.profile.user_avatar,a=t.profile.user_email.substring(0,t.profile.user_email.lastIndexOf("@"));t.fullname?a=t.fullname:t.profile.user_fullname&&0<t.profile.user_fullname.length&&(a=t.profile.user_fullname),n=0<i.indexOf("/img_60x60.gif")?a.charAt(0):'<img src="'+i+'" width="25" height="25" alt="">',t.fullname=null;i=t.config.contact_link?'            <a href="'+t.config.contact_link+'" class="guithutoansoan">                <i class="ico ico_mail"></i>                Gửi tòa soạn            </a>            <div class="clear"></div>':"",a='            <div class="myvne_container" id="myvne_user_logged" '+(t.config.max_width_taskbar?'style="max-width: '+t.config.max_width_taskbar+';"':"")+'>              <ul class="myvne_contact">                <li style="white-space: nowrap;"><span class="timer">'+this.set_time_topbar()+'</span></li>                <li><a href="'+t.vne_url+'/tin-tuc-24h" title="">24h qua</a></li>                <li><a href="'+t.vne_url+'/rss" id="">RSS</a></li>                <li>                    <a href="javascript:void(0)" id="myvne_subscribe_button" class="dk_nhantin"><i class="ic ic-email icon_nhantin"></i>Nhận tin</a>                </li>                <li>                <div class="item_social" style="margin-top:6px;" id="myvne_fb_like"> '+e+'</div><div id="myvne_fb_twitter" class="item_social" style="margin-top:6px;"> '+o+"</div>                "+i+'                </li>              </ul>              <ul class="myvne_form_log logged">                <li class="block_search_web">                  <div class="left">                    <div id="search">                        <input type="text" class="txt_input" id="inp_keyword" name="q" placeholder="Tìm kiếm">                        <button type="submit" class="icon_seach_web"><i class="ic ic-search"></i></button>                    </div>                  </div>                </li>                <li class="myvne_user" id="myvne_profile_tool">                  <a href="javascript:void(0);" id="myvne_avatar_taskbar" class="myvne_avatar">                    <span class="avatar_inner">'+n+'</span>                    <span class="name_user_av">'+a+'</span>                  </a>                  <ul class="myvne_user_status">                    <li class="li_bd li_account">                      <span class="avatar_sub">'+n+'</span>                        <span class="name_sub">'+a+'</span>                    </li>                    <li><a href="'+t.myvne_url+"/users/feed/"+t.profile.user_id+'">Hoạt động bình luận</a></li>                    <li><a href="'+t.myvne_url+'/users/tin-da-luu" >Tin đã lưu</a></li>                    <li class="li_bd"><a href="'+t.myvne_url+'/users/tin-da-doc" >Tin đã xem</a></li>                    <li class="li_bd"><a href="'+t.myvne_url+'/users/chi-tiet-tai-khoan">Tài khoản của tôi</a></li>                    <li><a href="javascript:void(0);" id="myvne_logout_link">Thoát</a></li>                  </ul>                </li>                <li class="myvne_notification" id="myvne_notify_show">                <a class="myvne_icon_bell_click"><svg class="ic ic-bell"><use xlink:href="#Bell"></use></svg></a><span id="myvne_notify_area">';0<t.notifycount&&t.notifycount<9?a+='<span class="badged" id="myvne_notify_count">'+t.notifycount+"</span>":9<t.notifycount&&(a+='<span class="badged" id="myvne_notify_count">9+</span>'),a+='</span><div id="myvne_notify_box" class="myvne_content_notification" style="display:none;">                    <ul id="myvne_notify_lists">                        <li class="myvne_loading">Loading</li>                    </ul>                    <ul id="myvne_notify_viewmore_area" style="display: none">                        <span id="myvne_loading_viewmore" style="display: none;">Loading</span>                        <a href="javascript:void(0);" id="myvne_notify_viewmore" class="myvne_notification-viewmore" style="display:none;">Xem thêm</a>                    </ul>                </div>                </li>              </ul>              <div class="clear"></div>            </div>        ',$("#myvne_taskbar").html(a),$("#insta_url").click(function(){var e=Number(screen.width/2-350),t=Number(screen.height/2-250);window.open("https://www.instagram.com/ionenews.official","","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=700, height=500, top="+t+", left="+e)}),0==t.taskbarload.profile&&($("#myvne_taskbar").on("click","#myvne_update_profile_link",function(e){t._html_popup_profile()}),$("#myvne_taskbar").on("click","#myvne_change_password_link",function(){t._html_popup_change_password()}),$("#myvne_taskbar").on("click","#myvne_logout_link",function(){t.logout()}),$("#myvne_taskbar").on("click","#myvne_profile_tool",function(){$("#myvne_avatar_taskbar").toggleClass("active"),$("#myvne_notify_box").hide(),$(this).find(".myvne_user_status").toggle()}),$("#myvne_taskbar").on("click",".myvne_icon_bell_click",function(){$("#myvne_profile_tool").find(".myvne_user_status").hide(),$("#myvne_notify_box").is(":visible")?($("#myvne_notify_box").hide(),$("#myvne_notify_box").getNiceScroll().hide(),$(this).parent().removeClass("active")):($("#myvne_notify_box").show(),$("#myvne_notify_box").getNiceScroll().show(),$(this).parent().addClass("active"),($("#myvne_notify_lists").find(".myvne_loading").length||$("#myvne_notify_count").length)&&t._get_notify())}),$("#myvne_taskbar").on("click","#myvne_subscribe_button",function(){t._html_popup_subscribe()}),$("#myvne_taskbar").on("click","#myvne_notify_viewmore",function(){$("#myvne_notify_viewmore").hide(),$("#myvne_loading_viewmore").show(),t.notifylimit=20,t._get_notify()}),t.taskbarload.profile=1)},_listener_basic:function(){var n=this;if(1==n.listenloaded)return!1;n.listenloaded=1;function e(e){if("https://my.vnexpress.net"==e.origin||"https://my.ione.net"==e.origin||"https://my.ngoisao.net"==e.origin||"https://demo-my.ione.net"==e.origin||"https://demo-my.ngoisao.net"==e.origin||"https://demo-my.vnexpress.net"==e.origin||"https://beta-my.ione.net"==e.origin||"https://beta-my.ngoisao.net"==e.origin||"https://beta-my.vnexpress.net"==e.origin){var t,o=e.data;switch(o){case"success":return!0;case"close":$.fancybox.close(!0),0<$("#iframe_register").length&&$("#iframe_register").remove();break;default:try{if(void 0!==(o=jQuery.parseJSON(o)).profile&&"object"!=typeof o.profile&&(o={success:0}),void 0!==o.profile&&void 0===o.profile.user_avatar)break}catch(e){o={success:0}}if(1==o.success&&void 0!==o.callback)switch(o.callback){case"subscribe":case"changepassword":case"forgotpass":case"resendactiveemail":case"resetpassword":n._html_popup_success(o.message,o.title);break;case"register":n.login(o),void 0!==o.url_redirect?n._html_popup_success(o.message,o.title,function(){location.href=o.url_redirect}):n._html_popup_success(o.message,o.title),localStorage.removeItem(myvne_users.cookieNameByHost("myvne_tmp_notify")),n.deleteCookie("expired_notify"),localStorage.removeItem(myvne_users.cookieNameByHost("myvne_count_notify")),setTimeout(function(){n._html_notify_confirm_email()},3e4);break;default:return n[o.callback](o)}else if(o.refer)switch(o.refer){case"profile":n.profile=o.profile,n._set_user();break;case"login":n._reset_user()}else o.error&&(t='<div class="width_common block_log block_log_onlytext">                                            <div class="width_common tit_box">                                                <p>'+o.message+"</p>                                            </div>                                        </div>",n._html_popup_success(t,o.title))}}}window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent&&window.attachEvent("onmessage",e)},resetpassword:function(e){this._html_popup_success(e.message,this.vne_url)},_html_popup_reset_password:function(e,t){if(!t||!e)return!1;return $.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne"><div class="mfp-close"></div><iframe class="mfp-iframe iframe_resetpass" frameborder="0" allowfullscreen></iframe></div></div>'},items:{src:this.myvne_url+"/authen/users/resetpassword?userid="+e+"&tokenkey="+t,type:"iframe"},mainClass:"mfp-with-zoom mfp-myvne"}),!1},login:function(e){var t,o=this;null!=o.getCookie("social_id")&&(t=o.getCookie("social_id").split("%2C")),o.deleteCookie("social_id"),o.profile=e.profile,o.notifycount=e.count_notify,o.profilecallback(),$.magnificPopup.close(),setTimeout(function(){o._html_notify_confirm_email()},3e3),0<$("#myvne_create_account").length&&$("#myvne_create_account").remove(),o.processCallback(["login","authen"],o.profile),user_signup_method="Email",5===o.profile.user_login_type&&(user_signup_method="Facebook"),6===o.profile.user_login_type&&(user_signup_method="Gmail"),"undefined"!=typeof dataLayer&&dataLayer.push({event:"userEvent",user_action:"User Login",user_signup_method:user_signup_method,user_id:e.profile.user_id}),1===e.success&&"register"==e.callback&&e.profile.user_id?(window._logAdp||[]).push({action:"register",regis_on:window.location.origin,my_vne:e.profile.user_id,vne_avatar:e.profile.user_avatar,vne_email:e.profile.user_email,vne_phone:e.profile.mibile||"",vne_name:e.profile.user_fullname||"",vne_gender:e.profile.sex||0,vne_age:e.profile.age,vne_birthday:e.profile.date_of_birth,vne_city:e.profile.city,vne_dist:e.profile.district,vne_address:e.profile.address,login_type:e.profile.user_login_type,facebook_id:t[0]||"",google_id:t[1]||""}):void 0!==e.adp.my_vne&&(window._logAdp||[]).push({action:e.adp.action,regis_on:window.location.origin,my_vne:e.adp.my_vne,vne_avatar:e.adp.vne_avatar,vne_email:e.adp.vne_email,vne_phone:e.adp.vne_phone||"",vne_name:e.adp.vne_name||"",vne_gender:e.adp.vne_gender||0,vne_age:e.adp.vne_age,vne_birthday:e.adp.vne_birthday,vne_city:e.adp.vne_city,vne_dist:e.adp.vne_dist,vne_address:e.adp.vne_address,login_type:e.profile.user_login_type,facebook_id:t[0]||"",google_id:t[1]||""})},guestpost:function(e){this.profile=e.profile,$.fancybox.close(!0),this.processCallback("authen",this.profile)},isValidXSS:function(e){var t=!0;if(e)for(var o=["onbeforecopy","onbeforecut","onbeforepaste","oncopy","oncut","oninput","onkeydown","onkeypress","onkeyup","onpaste","textInput","onabort","onbeforeunload","onhashchange","onload","onoffline","ononline","onreadystatechange","onstop","onunload","onreset","onsubmit","onclick","oncontextmenu","ondblclick","onlosecapture","onmouseenter","onmousedown","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onscroll","onmove","onmoveend","onmovestart","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onresize","onresizeend","onresizestart","onactivate","onbeforeactivate","onbeforedeactivate","onbeforeeditfocus","onblur","ondeactivate","onfocus","onfocusin","onfocusout","oncontrolselect","onselect","onselectionchange","onselectstart","onafterprint","onbeforeprint","onhelp","onerror","onerrorupdate","onafterupdate","onbeforeupdate","oncellchange","ondataavailable","ondatasetchanged","ondatasetcomplete","onrowenter","onrowexit","onrowsdelete","onrowsinserted","onbounce","onfinish","onstart","onchange","onfilterchange","onpropertychange","onsearch","onmessage","CheckboxStateChange","DOMActivate","DOMAttrModified","DOMCharacterDataModified","DOMFocusIn","DOMFocusOut","DOMMouseScroll","DOMNodeInserted","DOMNodeInsertedIntoDocument","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMSubtreeModified","dragdrop","dragexit","draggesture","overflow","overflowchanged","RadioStateChange","underflow","FSCommand","onAbort","onActivate","onAfterPrint","onAfterUpdate","onBeforeActivate","onBeforeCopy","onBeforeCut","onBeforeDeactivate","onBeforeEditFocus","onBeforePaste","onBeforePrint","onBeforeUnload","onBeforeUpdate","onBegin","onBlur","onBouncewindow","onCellChange","onChange","onClick","onContextMenu","onControlSelect","onCopy","onCut","onDataAvailable","onDataSetChanged","onDataSetComplete","onDblClick","onDeactivate","onDrag","onDragEnd","onDragLeave","onDragEnter","onDragOver","onDragDrop","onDragStart","onDrop","onEnd","onError","onErrorUpdate","onFilterChange","onFinish","onFocus","onFocusIn","onFocusOut","onHashChange","onHelp","onInput","onKeyDown","onKeyPress","onKeyUp","onLayoutComplete","onLoad","onLoseCapture","onMediaComplete","onMediaError","onMessage","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onMouseWheel","onMove","onMoveEnd","onMoveStart","onOffline","onOnline","onOutOfSync","onPaste","onPause","onPopState","onProgress","onPropertyChange","onReadyStateChange","onRedo","onRepeat","onReset","onResize","onResizeEnd","onResizeStart","onResume","onReverse","onRowsEnter","onRowExit","onRowDelete","onRowInserted","onScroll","onSeek","onSelect","onSelectionChange","onSelectStart","onStart","onStop","onStorage","onSyncRestored","onSubmit","onTimeError","onTrackChange","onUndo","onUnload","onURLFlip","seekSegmentTime","behavior","xss:expression","javascript","alert","<script>","<\/script>","livescript","vbscript","\x3c!--","--\x3e","<?php","document.domain","sTYLe"],n=0;n<o.length;n++)if(new RegExp(o[n],"gm").test(e)){t=!1;break}return t},_html_popup_login:function(){1!=this.getCookie("login_system")&&((e=new Date).setMonth(e.getMonth()+12),document.cookie="login_system=1;expires="+e+";domain=."+defaultDomain+";path=/");var e=encodeURIComponent(location.href.replace(/#.*?$/,""));$(".myvne_login_button").magnificPopup({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log"><div class="mfp-close"></div><iframe class="mfp-iframe iframe_login" frameborder="0" allowfullscreen></iframe></div></div>'},items:{src:this.myvne_url+"/authen/users/login?refer=authen&host="+location.origin+"&return="+(this.isValidXSS(e)?e:encodeURIComponent(location.origin+location.pathname))},mainClass:"mfp-with-zoom mfp-myvne"}).magnificPopup("open")},_html_popup_guest:function(){$.cookie(myvne_users.cookieNameByHost("myvne_user_id"));var e=this.config.input_extend?"?input_extend="+this.config.input_extend:"";$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log popup-notice"><div class="mfp-close"></div><iframe class="mfp-iframe iframe_guest" frameborder="0" allowfullscreen></iframe></div></div>'},items:{src:this.myvne_url+"/authen/users/guestpost"+e},mainClass:"mfp-with-zoom mfp-myvne"})},_html_popup_register:function(){$.magnificPopup.instance.close();1!=this.getCookie("login_system")&&((e=new Date).setMonth(e.getMonth()+12),document.cookie="login_system=1;expires="+e+";domain=."+defaultDomain+";path=/");var e=encodeURIComponent(location.href.replace(/#.*?$/,""));$(".myvne_login_button").magnificPopup({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log"><div class="mfp-close"></div><iframe id="iframe_register" class="mfp-iframe iframe_register" frameborder="0" allowfullscreen></iframe></div></div>'},items:{src:this.myvne_url+"/authen/users/register?host="+location.origin+"&return="+(this.isValidXSS(e)?e:encodeURIComponent(location.origin+location.pathname))},mainClass:"mfp-with-zoom mfp-myvne",callbacks:{beforeClose:function(){try{document.getElementById("iframe_register").contentWindow.postMessage("removesession","*")}catch(e){}}}}).magnificPopup("open")},_html_popup_success:function(e,t,o){var n='        <div id="popup-notice" class="white-popup-myvne popup-notice">';return""!=t&&void 0!==t||(t="Có lỗi xảy ra"),n+='<div class="title_popup_myvne title_notice width_common">'+t+'</div>                <div class="content_poup_myvne width_common content_log content_notice">',n+=e+"        </div>        ",$.magnificPopup.open({items:{src:n,type:"inline",mainClass:"mfp-with-zoom mfp-myvne"},callbacks:{close:function(){"function"==typeof o&&o()}}})},_html_popup_forgot:function(e){var t=this,o=t.fancyboxoption();return o.afterShow=function(){$("#myvne_close_popup").bind("click",function(){$.fancybox.close(!0)})},o.afterClose=function(){$("#myvne_close_popup").unbind(),e&&t._redirect(e)},$.fancybox({href:t.myvne_url+"/authen/users/forgotpass?cache=1",type:"iframe"},o),!1},_html_popup_resend_mail:function(){var e=this.fancyboxoption();return $.fancybox({href:this.myvne_url+"/authen/users/resendactiveemail?cache=1",type:"iframe"},e),!1},updateprofile:function(e){this.profile=e.profile,this._set_user(),this._html_popup_success(e.message),this.processCallback("update_profile",this.profile)},_html_popup_profile:function(){var e=this.fancyboxoption();return $.fancybox({href:this.myvne_url+"/authen/users/updateprofile",type:"iframe"},e),!1},_html_popup_change_password:function(){var e=this.fancyboxoption();return $.fancybox({href:this.myvne_url+"/authen/users/changepassword",type:"iframe"},e),!1},_html_popup_subscribe:function(){var e=this.fancyboxoption();return $.fancybox({href:this.myvne_url+"/subscribe/register",type:"iframe"},e),!1},setCookie:function(e,t,o){var n,i=location.hostname,i=i.substring(i.lastIndexOf(".",i.lastIndexOf(".")-1)+1);e=-1!=["sso","social_id","user_id","users_cache_token","remember_me","expired_notify","count_notify","tmp_notify"].indexOf(e)?this.cookieNameByHost(this.prefix_cookie+e):this.prefix_cookie+e,n=o?((n=new Date).setTime(n.getTime()+24*o*60*60*1e3),"; expires="+n.toGMTString()):"",void 0!==t&&(document.cookie=void 0===i?e+"="+t+n+";domain=."+defaultDomain+";path=/; secure;":e+"="+t+n+";domain=."+i+"; path=/; secure;")},setCookieSite:function(e,t,o){document.location.hostname;var n,i=document.domain;n=o?((n=new Date).setTime(n.getTime()+24*o*60*60*1e3),"; expires="+n.toGMTString()):"",void 0!==t&&(document.cookie=e+"="+t+n+";domain="+i+"; path=/; secure;")},getCookie:function(e,t){for(var o=null,n=e,i=(n=(t="boolean"!=typeof t||t)&&-1!=["sso","social_id","user_id","users_cache_token","remember_me","expired_notify","count_notify","tmp_notify"].indexOf(n)?this.cookieNameByHost(this.prefix_cookie+n):this.prefix_cookie+n)+"=",a=document.cookie.split(";"),s=0;s<a.length;s++){for(var r=a[s];" "==r.charAt(0);)r=r.substring(1,r.length);0==r.indexOf(i)&&(o=r.substring(i.length,r.length))}return null==o&&t&&(o=this.getCookie(e,!1)),o},deleteCookie:function(e){this.setCookie(e,"",-1)},_reset_user:function(){var e=this;e.notifycount=0,e.notifyoffset=0,e.profile={},clearTimeout(e.timeoutprofile),$("#myvne_taskbar").empty(),e._html_taskbar_not_login()},_set_user:function(){var e=this;parseInt(this.getCookie("user_id"))||e.setCookie("user_id",e.profile.user_id,365),e.setCookieSite("fosp_aid",e.profile.user_id,1),window.vne_myvne_id=e.profile.user_id,$("#myvne_user_logged").length?e._reload_profile():e._html_taskbar_profile()},_reload_profile:function(){var e=this,t=10<e.profile.user_avatar.indexOf("/src/")?this.replaceAvatar(e.profile.user_avatar,"/c60x60/"):e.profile.user_avatar;0<t.indexOf("/img_60x60.gif")?(o=e.profile.user_email.charAt(0),e.profile.user_fullname&&0<e.profile.user_fullname.length&&(o=e.profile.user_fullname.charAt(0))):o='<img src="'+t+'" width="25" height="25" alt="">';var o='<span class="avatar_inner">'+o+'</span>            <span class="name_user_av">'+(e.profile.user_fullname||e.profile.user_email.substring(0,e.profile.user_email.lastIndexOf("@")))+"</span>";$("#myvne_avatar_taskbar").html(o),0<e.notifycount&&$("#myvne_notify_area").html('<span class="badged" id="myvne_notify_count">'+e.notifycount+"</span>")},_get_message:function(e){return"system_error"===e?"":""},_redirect:function(e){window.location=e},authentication:function(e,t){var o=this;if(null==myvne_users.getCookie("user_id"))switch(o.unsetCallback("authen"),o.setCallback("authen",e),t){case"member":o._html_popup_login();break;case"register":o._html_popup_register();break;default:o._html_popup_guest()}else o.runcallback(e,o.profile);return!1},runcallback:function(e,t){return e&&("function"==typeof e?e.call(this,t):"string"==typeof e&&"function"==typeof window[e]&&window[e](t)),self.callback="",!1},widgetgetuser:function(e,t){var o=this;t=t||"",e&&$.ajax({type:"get",dataType:"jsonp",jsonpCallback:t,data:{myvne_users_id:e},url:o.myvne_url+"/apifrontend/getusersprofile",success:function(e){0==e.error||console.log(e.message)},error:function(e,t){console.log(o._get_message("system_error"))}})},replaceAvatar:function(e,t){return e.replace("/src/",t)},resend_mail_register:function(e){var o=this;return $("#resendemail_success").remove(),$("#resendemail").attr("style","display:none"),$("#resendemail_loadding").removeAttr("style"),$.ajax({type:"post",dataType:"json",url:o.myvne_url+"/authen/users/resendemail",data:{myvne_email:e},success:function(e){0==e.error?($("#resendemail").append('<p class="width_common tit_box mt15" id="resendemail_success">Gửi lại thành công</p>'),setTimeout(function(){$("#resendemail_success").remove()},3e3),$("#resendemail").removeAttr("style"),$("#resendemail_loadding").attr("style","display:none")):($("#resendemail").removeAttr("style"),$("#resendemail").addClass("tit_box_error").html("<p>"+e.message+"</p>"))},error:function(e,t){alert(o._get_message("system_error"))}}),!1},anonymous:function(){$.magnificPopup.instance.close(),this.processCallback("anonymous"),this.setCookie("anonymous","anonymous",5)},_html_popup_close:function(){$.magnificPopup.close()},_html_popup_rule:function(){$.magnificPopup.instance.close();var e=this;$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log"><div class="mfp-close"></div><iframe class="mfp-iframe iframe_register" frameborder="0" allowfullscreen></iframe></div></div>'},items:{src:e.myvne_url+"/authen/users/rule"},mainClass:"mfp-with-zoom mfp-myvne",callbacks:{open:function(){},close:function(){},afterClose:function(){e._html_popup_register()}}})},set_time_topbar:function(){var e=new Date,t=new Array(7);t[0]="Chủ nhật",t[1]="Thứ hai",t[2]="Thứ ba",t[3]="Thứ tư",t[4]="Thứ năm",t[5]="Thứ sáu",t[6]="Thứ bảy";var o=t[e.getDay()],n=new Date,i=n.getDate(),a=n.getMonth()+1,t=n.getHours(),e=n.getMinutes();return o+", "+i+"/"+a+"/"+n.getFullYear()+", "+(10<=t?t:"0"+t)+":"+(10<=e?e:"0"+e)+" (GMT+7)"},_html_popup_register_comment:function(e,t){$("body").append('<div id="myvne_create_account" style="position: fixed; right: 30px; bottom: 0; z-index: 9999; background: #fff;"><iframe width="320" height="420" id="iframe_register" class="mfp-iframe iframe_register" frameborder="0" allowfullscreen="" src="'+myvne_users.myvne_url+"/authen/users/registerv2?email="+t+"&name="+e+'"></iframe></div>')},_html_popup_rulev2:function(){$.magnificPopup.instance.close();$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log"><div class="mfp-close"></div><iframe class="mfp-iframe iframe_register" frameborder="0" allowfullscreen></iframe></div></div>'},items:{src:this.myvne_url+"/authen/users/rule"},mainClass:"mfp-with-zoom mfp-myvne"})},_html_notify_confirm_email:function(){var e,t,o,n;0<Object.keys(myvne_users.profile).length&&0===myvne_users.profile.status&&(e='<div class="message_box" style="right: 35px; width: 320px; background: #fff; position: fixed; right: 80px; bottom: 0; z-index: 999; -webkit-box-shadow: 0px 4px 5px 3px rgba(0,0,0,0.1); -moz-box-shadow: 0px 4px 5px 3px rgba(0,0,0,0.1); box-shadow: 0px 4px 5px 3px rgba(0,0,0,0.1); font-family: Arial, Helvetica, sans-serif;">\t\t\t\t\t\t\t\t<span class="close_mess" onclick="closeMess()" style="width: 32px;height: 32px;background: #fff;border: 1px solid #E5E5E5;text-align: center; line-height: 32px; border-radius: 50%; cursor: pointer; position: absolute; top: -16px; right: -16px; color: #4F4F4F; font-size: 30px;">×</span>\t\t\t\t\t\t\t\t<div class="width_common tit_mess_box" style="color: #9F224E; font-size: 18px; font-weight: 700; padding: 10px 15px; border-bottom: 1px solid #9F224E;">Thông báo</div>\t\t\t\t\t\t\t\t<div class="width_common content_mess" style="padding: 15px; font-size: 15px;">\t\t\t\t\t\t\t\t\t<p class="notice_p" style="line-height: 24px; margin-bottom: 20px;"><strong>Mời xác thực email</strong><br>\t\t\t\t\t\t\t\t\t\tĐể đảm bảo an toàn cho tài khoản và có thể lấy lại mật khẩu bằng email.\t\t\t\t\t\t\t\t\t</p>\t\t\t\t\t\t\t\t\t<p class="email_xt" style="color: #076DB6; font-weight: 700; max-width: 100%; overflow: hidden; text-overflow: ellipsis; text-align: center; white-space: nowrap; line-height: 24px; margin-bottom: 20px;">'+myvne_users.profile.user_email+'</p>\t\t\t\t\t\t\t\t\t<div class="item_input_log item_button_act">\t\t\t\t\t\t\t\t\t\t<button class="pri_button btn_log has_transition" data-email="'+myvne_users.profile.user_email+'" id="home_resendemail">Xác thực ngay</button>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>',t=this.getCookie("expired_notify"),o=parseInt(localStorage.getItem(myvne_users.cookieNameByHost("myvne_count_notify"))),n=parseInt(localStorage.getItem(myvne_users.cookieNameByHost("myvne_tmp_notify"))),void 0!==o&&null!=o?t?0==n&&$(document.body).append(e):(localStorage.setItem(myvne_users.cookieNameByHost("myvne_tmp_notify"),0),1===o?(this.setCookie("expired_notify",1,1),localStorage.setItem(myvne_users.cookieNameByHost("myvne_count_notify"),2),$(document.body).append(e)):2===o?(this.setCookie("expired_notify",1,7),localStorage.setItem(myvne_users.cookieNameByHost("myvne_count_notify"),3),$(document.body).append(e)):3===o?(this.setCookie("expired_notify",1,14),localStorage.setItem(myvne_users.cookieNameByHost("myvne_count_notify"),4),$(document.body).append(e)):4===o&&localStorage.setItem(myvne_users.cookieNameByHost("myvne_count_notify"),999)):(this.setCookie("expired_notify",1,1),localStorage.setItem(myvne_users.cookieNameByHost("myvne_count_notify"),1),localStorage.setItem(myvne_users.cookieNameByHost("myvne_tmp_notify"),0),$(document.body).append(e)))}};function MyvneCallback(e){}function closeMess(){localStorage.setItem(myvne_users.cookieNameByHost("myvne_tmp_notify"),1),$(".message_box").remove()}$(document).ready(function(){$("body").on("keydown","#search",function(e){if(13==e.keyCode)return $(".icon_seach_web").click(),!1}),$(".btn_search").click(function(){var e=$(".input_search").val();return e&&(e=search_action+"?q="+e,window.open(e,"_blank")),!1}),setTimeout(function(){myvne_users._html_notify_confirm_email()},3e3)});